<!doctype html><html xmlns="http://www.w3.org/1999/xhtml"><head><meta charset="UTF-8"><meta http-equiv="pragma" content="no-cache"><meta http-equiv="cache-control" content="no-cache"><meta name="applicable-device" content="mobile"><meta name="renderer" content="webkit"><meta name="force-rendering" content="webkit"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover"><meta name="Copyright" content="miHoYo"><meta name="format-detection" content="telephone=no"><meta name="format-detection" content="email=no"/><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-status-bar-style" content="black-translucent"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>《原神》官方网站-全新「月之四」版本「空月之歌·终曲」上线！</title><meta property="og:title" content="《原神》官方网站-全新「月之四」版本「空月之歌·终曲」上线！"/><meta property="og:description" content="全新「月之四」版本，「空月之歌·终曲」—— 如果在冬夜，一个旅人，现已推出！《原神》是由米哈游自研的一款开放世界冒险RPG。你将在游戏中探索一个被称作「提瓦特」的幻想世界。在这广阔的世界中，你可以踏遍七国，邂逅性格各异、能力独特的同伴，与他们一同对抗强敌，踏上寻回血亲之路；也可以不带目的地漫游，沉浸在充满生机的世界里，让好奇心驱使自己发掘各个角落的奥秘……直到你与分离的血亲重聚，在终点见证一切事物的沉淀。"/><meta property="og:image" content=""/><meta property="puzzle:seo" data-title="《原神》官方网站-全新「月之四」版本「空月之歌·终曲」上线！" data-desc="全新「月之四」版本，「空月之歌·终曲」—— 如果在冬夜，一个旅人，现已推出！《原神》是由米哈游自研的一款开放世界冒险RPG。你将在游戏中探索一个被称作「提瓦特」的幻想世界。在这广阔的世界中，你可以踏遍七国，邂逅性格各异、能力独特的同伴，与他们一同对抗强敌，踏上寻回血亲之路；也可以不带目的地漫游，沉浸在充满生机的世界里，让好奇心驱使自己发掘各个角落的奥秘……直到你与分离的血亲重聚，在终点见证一切事物的沉淀。" data-keywords="原神, 原神新版本, 原神电脑版, 原神完整版,原神最新版, 原神官网, 原神PC官网, 原神PC端, 原神PC端官网, 原神下载, 原神攻略, 原神PC版, 原神PC下载, 原神手游, 原神ios, 原神官服,原神官方, 原神游戏, 原神安卓, 原神米哈游, 原神手游官网, 原神官方, 原神手游ios, 原神漫画, 原神开放世界, yuanshen官网,原神新地图,原神新区域,原神角色,原神新角色,原神新剧情,原神新武器,原神新活动,原神版本更新" data-img=""/><link id="icon" rel="shortcut icon" href="https://ys.mihoyo.com/main/favicon.ico"/><meta name="Description" content="全新「月之四」版本，「空月之歌·终曲」—— 如果在冬夜，一个旅人，现已推出！《原神》是由米哈游自研的一款开放世界冒险RPG。你将在游戏中探索一个被称作「提瓦特」的幻想世界。在这广阔的世界中，你可以踏遍七国，邂逅性格各异、能力独特的同伴，与他们一同对抗强敌，踏上寻回血亲之路；也可以不带目的地漫游，沉浸在充满生机的世界里，让好奇心驱使自己发掘各个角落的奥秘……直到你与分离的血亲重聚，在终点见证一切事物的沉淀。"><meta name="Keywords" content="原神, 原神新版本, 原神电脑版, 原神完整版,原神最新版, 原神官网, 原神PC官网, 原神PC端, 原神PC端官网, 原神下载, 原神攻略, 原神PC版, 原神PC下载, 原神手游, 原神ios, 原神官服,原神官方, 原神游戏, 原神安卓, 原神米哈游, 原神手游官网, 原神官方, 原神手游ios, 原神漫画, 原神开放世界, yuanshen官网,原神新地图,原神新区域,原神角色,原神新角色,原神新剧情,原神新武器,原神新活动,原神版本更新"><script defer="defer" src="https://act.mihoyo.com/puzzle/hk4e/pz_frZbKlEoJS/config.d20716ae.js"></script><script defer="defer" src="https://act.mihoyo.com/puzzle/hk4e/pz_frZbKlEoJS/vendor.5f0c457c.js"></script><script defer="defer" src="https://act.mihoyo.com/puzzle/hk4e/pz_frZbKlEoJS/setups.55fa2656.js"></script><link href="https://act.mihoyo.com/puzzle/hk4e/pz_frZbKlEoJS/setups.4580797a.css" rel="stylesheet"></head><body><div id="app"></div><script>(function () {window._SNAP_TREE_PC = {"tagName":"div","id":"snap-layout","children":[{"tagName":"div","id":"snap-frame","children":[{"tagName":"img","style":{"position":"absolute","right":"3.39rem","top":"8.616953125rem","width":"1.67rem","height":"1.49rem","z-index":5},"attributes":{"src":"https://act-webstatic-pre.mihoyo.com/puzzle/hk4e/pz_frZbKlEoJS/resource/puzzle/2025/12/16/42ce459961118ad8f4fd6c9d0b9880b3_3605295540577883673.png?x-oss-process=image/format,webp/quality,Q_90"}},{"tagName":"img","style":{"position":"absolute","left":"10.555rem","top":"6.676953125rem","width":"3.89rem","height":"0.46rem","z-index":9},"attributes":{"src":"https://act-webstatic-pre.mihoyo.com/puzzle/hk4e/pz_frZbKlEoJS/resource/puzzle/2026/01/13/8439ab19cf07b16b0f494da16bedaabf_821384565109052430.png?x-oss-process=image/format,webp/quality,Q_90"}},{"tagName":"img","style":{"position":"absolute","left":"10.2509375rem","top":"6.576953125rem","width":"0.66rem","height":"0.66rem","z-index":10},"attributes":{"src":"https://act-webstatic-pre.mihoyo.com/puzzle/hk4e/pz_frZbKlEoJS/resource/puzzle/2025/12/16/5f61ff636f3de3ef19d4a6aaca088bd1_8076384237820972083.png?x-oss-process=image/format,webp/quality,Q_90"}},{"tagName":"div","style":{"position":"absolute","left":"8.92rem","top":"9.31140625rem","width":"3.56rem","height":"0.79rem","background":"rgba(0, 0, 0, 0) url('https://act-webstatic-pre.mihoyo.com/puzzle/hk4e/pz_frZbKlEoJS/resource/puzzle/2025/12/16/ad53f5706ec633abe9bacd037e983fac_1168972042305358678.png?x-oss-process=image/format,webp/quality,Q_90') no-repeat scroll 50% 50% / contain padding-box border-box","z-index":7}},{"tagName":"div","style":{"position":"absolute","left":"12.57rem","top":"9.31140625rem","width":"3.56rem","height":"0.79rem","background":"rgba(0, 0, 0, 0) url('https://act-webstatic-pre.mihoyo.com/puzzle/hk4e/pz_frZbKlEoJS/resource/puzzle/2025/12/16/c647a8e3e37be03c5ad07c4c39009715_1714098768108347937.png?x-oss-process=image/format,webp/quality,Q_90') no-repeat scroll 50% 50% / cover padding-box border-box","z-index":8}},{"tagName":"img","style":{"position":"absolute","left":"11.595rem","top":"10.542890625rem","width":"1.81rem","height":"0.2rem","z-index":6},"attributes":{"src":"https://act-webstatic-pre.mihoyo.com/puzzle/hk4e/pz_frZbKlEoJS/resource/puzzle/2025/12/29/b71049f0272bf8ee37cf8a14718b4747_1107122191302444365.png?x-oss-process=image/format,webp/quality,Q_90"}},{"tagName":"img","style":{"position":"absolute","left":"12.31rem","top":"10.121953125rem","width":"0.38rem","height":"0.38rem","z-index":11},"attributes":{"src":"https://act-webstatic-pre.mihoyo.com/puzzle/hk4e/pz_frZbKlEoJS/resource/puzzle/2025/12/29/ee076693a986c6d05ef858217b33e7b9_2669840281217241985.png?x-oss-process=image/format,webp/quality,Q_90"}},{"tagName":"div","style":{"position":"absolute","left":"0rem","top":"0rem","width":"25rem","height":"10.8rem","background":"rgb(0, 0, 0) none no-repeat scroll 50% 50% / cover padding-box border-box","z-index":0}},{"tagName":"img","style":{"position":"absolute","left":"0rem","top":"0rem","width":"25rem","height":"10.8rem","z-index":1},"attributes":{"src":"https://act-webstatic-pre.mihoyo.com/puzzle/hk4e/pz_frZbKlEoJS/resource/puzzle/2025/12/31/7aa71ee96abb380fc3d1973701f7bb16_6007049507211371535.jpeg?x-oss-process=image/format,webp/quality,Q_90"}},{"tagName":"img","style":{"position":"absolute","right":"3.36rem","top":"0.59rem","width":"2.84rem","height":"0.77rem","z-index":2},"attributes":{"src":"https://act-webstatic-pre.mihoyo.com/puzzle/hk4e/pz_frZbKlEoJS/resource/puzzle/2025/12/16/ebad1e7e389a8af262bd2885574f455c_2306253676826453489.png?x-oss-process=image/format,webp/quality,Q_90"}},{"tagName":"img","style":{"position":"absolute","right":"3.36rem","top":"1.298984375rem","width":"2.84rem","height":"0.77rem","z-index":3},"attributes":{"src":"https://act-webstatic-pre.mihoyo.com/puzzle/hk4e/pz_frZbKlEoJS/resource/puzzle/2025/12/16/e0179fa091280de5dac3a97df01752cc_4900060332686604162.png?x-oss-process=image/format,webp/quality,Q_90"}},{"tagName":"img","style":{"position":"absolute","left":"3.17rem","top":"0.36rem","width":"3.63rem","height":"1.23rem","z-index":4},"attributes":{"src":"https://act-webstatic-pre.mihoyo.com/puzzle/hk4e/pz_frZbKlEoJS/resource/puzzle/2025/12/16/c4755bd7c02806312c9448a92b04c9b9_2359217227887879070.png?x-oss-process=image/format,webp/quality,Q_90"}},{"tagName":"img","style":{"position":"absolute","left":"4.268984375rem","top":"9.453984375rem","width":"1.45rem","height":"0.22rem","z-index":12},"attributes":{"src":"https://act-webstatic-pre.mihoyo.com/puzzle/hk4e/pz_frZbKlEoJS/resource/puzzle/2026/01/13/2ce98bbdcb878b3ff72c86f68e63f88b_4925170750727953116.png?x-oss-process=image/format,webp/quality,Q_90"}},{"tagName":"img","style":{"position":"absolute","left":"3.443984375rem","top":"8.599921875rem","width":"3.15rem","height":"0.66rem","z-index":13},"attributes":{"src":"https://act-webstatic-pre.mihoyo.com/puzzle/hk4e/pz_frZbKlEoJS/resource/puzzle/2026/01/13/91415eedcfe9933b867a5976f6e91303_6578158535928524951.png?x-oss-process=image/format,webp/quality,Q_90"}},{"tagName":"img","style":{"position":"absolute","left":"3.458984375rem","top":"9.4559375rem","width":"0.65rem","height":"0.22rem","z-index":14},"attributes":{"src":"https://act-webstatic-pre.mihoyo.com/puzzle/hk4e/pz_frZbKlEoJS/resource/puzzle/2026/01/13/ee40b3289653fb4f52d23d3be88e002a_8690453069961413522.png?x-oss-process=image/format,webp/quality,Q_90"}},{"tagName":"img","style":{"position":"absolute","left":"3.43rem","top":"6.963984375rem","width":"1.1rem","height":"1.42rem","z-index":15},"attributes":{"src":"https://act-webstatic-pre.mihoyo.com/puzzle/hk4e/pz_frZbKlEoJS/resource/puzzle/2025/11/13/100630b4eaead3fc2b5f6988e7cf37a1_6842453170888374189.png?x-oss-process=image/format,webp/quality,Q_90"}}]}]};
      window._SNAP_TREE_H5 = {"tagName":"div","id":"snap-layout","children":[{"tagName":"div","id":"snap-frame","children":[{"tagName":"div","style":{"position":"absolute","left":"0rem","top":"0rem","width":"7.51rem","height":"16.68rem","background":"rgba(0, 0, 0, 0) url('https://act-webstatic-pre.mihoyo.com/puzzle/hk4e/pz_frZbKlEoJS/resource/puzzle/2025/12/31/9436aecff01cb52ae9d972f840a323f7_6745376411565136161.png?x-oss-process=image/format,webp/quality,Q_90') no-repeat scroll 50% 50% / cover padding-box border-box","z-index":0}},{"tagName":"img","style":{"position":"absolute","left":"3.732421875rem","top":"14.63890625rem","width":"1.84rem","height":"0.23rem","z-index":5},"attributes":{"src":"https://act-webstatic-pre.mihoyo.com/puzzle/hk4e/pz_frZbKlEoJS/resource/puzzle/2025/12/29/2d3d56f721c3e6399ae99db532508aa1_6526647802105670124.png?x-oss-process=image/format,webp/quality,Q_90"}},{"tagName":"img","style":{"position":"absolute","left":"2.414921875rem","top":"14.6509375rem","width":"0.83rem","height":"0.23rem","z-index":6},"attributes":{"src":"https://act-webstatic-pre.mihoyo.com/puzzle/hk4e/pz_frZbKlEoJS/resource/puzzle/2025/12/29/cb1874446ae97a97f6d53ecd703ae3f8_1059810165315405471.png?x-oss-process=image/format,webp/quality,Q_90"}},{"tagName":"div","style":{"position":"absolute","left":"0.6284375rem","top":"13.502890625rem","width":"3.1rem","height":"0.76rem","background":"rgba(0, 0, 0, 0) url('https://act-webstatic-pre.mihoyo.com/puzzle/hk4e/pz_frZbKlEoJS/resource/puzzle/2025/12/29/c3963cdbf702886115176e449d79a1c3_1876335377898376398.png?x-oss-process=image/format,webp/quality,Q_90') no-repeat scroll 50% 50% / contain padding-box border-box","z-index":9}},{"tagName":"div","style":{"position":"absolute","left":"3.8084375rem","top":"13.512890625rem","width":"3.08rem","height":"0.68rem","background":"rgba(0, 0, 0, 0) url('https://act-webstatic-pre.mihoyo.com/puzzle/hk4e/pz_frZbKlEoJS/resource/puzzle/2025/12/29/4a4e9d33a9fb81540fd4ab956fd8670a_3114296623829639132.png?x-oss-process=image/format,webp/quality,Q_90') no-repeat scroll 50% 50% / cover padding-box border-box","z-index":8}},{"tagName":"img","style":{"position":"absolute","left":"1.19rem","top":"10.568984375rem","width":"3.467109375rem","height":"0.41rem","z-index":3},"attributes":{"src":"https://act-webstatic-pre.mihoyo.com/puzzle/hk4e/pz_frZbKlEoJS/resource/puzzle/2026/01/13/e5d38d073bb05c04c2503eb024441268_1049898972284648627.png?x-oss-process=image/format,webp/quality,Q_90"}},{"tagName":"img","style":{"position":"absolute","left":"0.97rem","top":"10.458984375rem","width":"0.62rem","height":"0.63rem","z-index":7},"attributes":{"src":"https://act-webstatic-pre.mihoyo.com/puzzle/hk4e/pz_frZbKlEoJS/resource/puzzle/2025/12/29/89e504a6ea7df9f3d070450ee5f2db05_171780383385751211.png?x-oss-process=image/format,webp/quality,Q_90"}},{"tagName":"img","style":{"position":"absolute","left":"0.7534375rem","top":"12.938984375rem","width":"6.01rem","height":"0.22rem","z-index":4},"attributes":{"src":"https://act-webstatic-pre.mihoyo.com/puzzle/hk4e/pz_frZbKlEoJS/resource/puzzle/2025/12/29/1e3df7fbde733cda37bb5d7658b76578_6047571148913414555.png?x-oss-process=image/format,webp/quality,Q_90"}},{"tagName":"img","style":{"position":"absolute","right":"0.15rem","top":"2.4rem","width":"2.2rem","height":"0.6rem","z-index":1},"attributes":{"src":"https://act-webstatic-pre.mihoyo.com/puzzle/hk4e/pz_frZbKlEoJS/resource/puzzle/2025/12/29/f26963efb46d93148ce1158fba8d787b_366928547090688451.png?x-oss-process=image/format,webp/quality,Q_90"}},{"tagName":"img","style":{"position":"absolute","right":"0.15rem","top":"2.95rem","width":"2.2rem","height":"0.61rem","z-index":2},"attributes":{"src":"https://act-webstatic-pre.mihoyo.com/puzzle/hk4e/pz_frZbKlEoJS/resource/puzzle/2025/12/29/f1f42a0d3a3a75fd19db7e6aee5ab5b9_4058575926938668289.png?x-oss-process=image/format,webp/quality,Q_90"}},{"tagName":"img","style":{"position":"absolute","right":"0.34rem","top":"10.3359375rem","width":"1.37rem","height":"1.21rem","z-index":11},"attributes":{"src":"https://act-webstatic-pre.mihoyo.com/puzzle/hk4e/pz_frZbKlEoJS/resource/puzzle/2025/12/29/ea0c4a4be59477d008020807938b2a5c_5462870117999378601.png?x-oss-process=image/format,webp/quality,Q_90"}},{"tagName":"img","style":{"position":"absolute","left":"0.12rem","top":"2.6rem","width":"0.77rem","height":"0.99rem","z-index":10},"attributes":{"src":"https://act-webstatic-pre.mihoyo.com/puzzle/hk4e/pz_frZbKlEoJS/resource/puzzle/2025/12/29/25a2ed9bf6b82657fbb4f27edd4e9636_361645892677413733.png?x-oss-process=image/format,webp/quality,Q_90"}}]},{"tagName":"img","style":{"position":"absolute","left":"0rem","top":"0rem","width":"7.51rem","height":"1.15rem","z-index":12},"attributes":{"src":"https://act-webstatic-pre.mihoyo.com/puzzle/hk4e/pz_frZbKlEoJS/resource/puzzle/2026/01/13/0e8b2297155e6a390f8e400c01edcef2_6069681931527410047.png?x-oss-process=image/format,webp/quality,Q_90"}}]};

      

      window._SNAP_LAYOUT_HANDLER = function(platform) {
        return platform === 'h5' ? {
  "fullScreen": "colClip",
  "designHeight": 1668,
  "designWidth": 750,
  "maxRatio": 0.5357142857142857
} : {
  "fullScreen": "rawClip",
  "designHeight": 1080,
  "designWidth": 2500,
  "minRatio": 1.6925925925925926
};
      };
    })();

    function e(e,t){if(t==null||t>e.length)t=e.length;for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function t(t){if(Array.isArray(t))return e(t)}function n(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function o(e,t,n){t=c(t);return y(e,S()?Reflect.construct(t,n||[],c(e).constructor):t.apply(e,n))}function r(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||false;o.configurable=true;if("value"in o)o.writable=true;Object.defineProperty(e,o.key,o)}}function a(e,t,n){if(t)i(e.prototype,t);if(n)i(e,n);return e}function u(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}function c(e){c=Object.setPrototypeOf?Object.getPrototypeOf:function e(e){return e.__proto__||Object.getPrototypeOf(e)};return c(e)}function l(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)m(e,t)}function s(e,t){if(t!=null&&typeof Symbol!=="undefined"&&t[Symbol.hasInstance]){return!!t[Symbol.hasInstance](e)}else{return e instanceof t}}function f(e){if(typeof Symbol!=="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};var o=Object.keys(n);if(typeof Object.getOwnPropertySymbols==="function"){o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))}o.forEach(function(t){u(e,t,n[t])})}return e}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);if(t){o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})}n.push.apply(n,o)}return n}function v(e,t){t=t!=null?t:{};if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(t))}else{h(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function y(e,t){if(t&&(g(t)==="object"||typeof t==="function")){return t}return n(e)}function m(e,t){m=Object.setPrototypeOf||function e(e,t){e.__proto__=t;return e};return m(e,t)}function b(e){return t(e)||f(e)||w(e)||d()}function g(e){"@swc/helpers - typeof";return e&&typeof Symbol!=="undefined"&&e.constructor===Symbol?"symbol":typeof e}function w(t,n){if(!t)return;if(typeof t==="string")return e(t,n);var o=Object.prototype.toString.call(t).slice(8,-1);if(o==="Object"&&t.constructor)o=t.constructor.name;if(o==="Map"||o==="Set")return Array.from(o);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return e(t,n)}function S(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(S=function(){return!!e})()}(function(){"use strict";var e=Object.create;var t=Object.defineProperty;var n=Object.getOwnPropertyDescriptor;var i=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty;var f=function(e,t){return function(){return t||e((t={exports:{}}).exports,t),t.exports}};var d=function(e,o,r,a){var u=true,l=false,s=undefined;if(o&&(typeof o==="undefined"?"undefined":g(o))=="object"||typeof o=="function")try{var f=function(){var i=p.value;!c.call(e,i)&&i!==r&&t(e,i,{get:function(){return o[i]},enumerable:!(a=n(o,i))||a.enumerable})};for(var d=i(o)[Symbol.iterator](),p;!(u=(p=d.next()).done);u=true)f()}catch(e){l=true;s=e}finally{try{if(!u&&d.return!=null){d.return()}}finally{if(l){throw s}}}return e};var h=function(n,o,r){return r=n!=null?e(u(n)):{},d(t(r,"default",{value:n,enumerable:true}),n)};var y=f(function(e,t){var n=function e(e,t,n){var r,i,c,l,s,f,d=0,p=false,h=false,v=true;if(typeof e!="function")throw new TypeError(u);t=a(t)||0,o(n)&&(p=!!n.leading,h="maxWait"in n,c=h?S(a(n.maxWait)||0,t):c,v="trailing"in n?!!n.trailing:v);function y(t){var n=r,o=i;return r=i=void 0,d=t,l=e.apply(o,n),l}function m(e){return d=e,s=setTimeout(w,t),p?y(e):l}function b(e){var n=e-f,o=e-d,r=t-n;return h?k(r,c-o):r}function g(e){var n=e-f,o=e-d;return f===void 0||n>=t||n<0||h&&o>=c}function w(){var e=O();if(g(e))return _(e);s=setTimeout(w,b(e))}function _(e){return s=void 0,v&&r?y(e):(r=i=void 0,l)}function E(){s!==void 0&&clearTimeout(s),d=0,r=f=i=s=void 0}function R(){return s===void 0?l:_(O())}function P(){var e=O(),n=g(e);if(r=arguments,i=this,f=e,n){if(s===void 0)return m(f);if(h)return s=setTimeout(w,t),y(f)}return s===void 0&&(s=setTimeout(w,t)),l}return P.cancel=E,P.flush=R,P};var o=function e(e){var t=typeof e==="undefined"?"undefined":g(e);return!!e&&(t=="object"||t=="function")};var r=function e(e){return!!e&&(typeof e==="undefined"?"undefined":g(e))=="object"};var i=function e(e){return(typeof e==="undefined"?"undefined":g(e))=="symbol"||r(e)&&w.call(e)==l};var a=function e(e){if(typeof e=="number")return e;if(i(e))return c;if(o(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=o(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(s,"");var n=d.test(e);return n||p.test(e)?h(e.slice(2),n?2:8):f.test(e)?c:+e};var u="Expected a function",c=NaN,l="[object Symbol]",s=/^\s+|\s+$/g,f=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,p=/^0o[0-7]+$/i,h=parseInt,v=(typeof global==="undefined"?"undefined":g(global))=="object"&&global&&global.Object===Object&&global,y=(typeof self==="undefined"?"undefined":g(self))=="object"&&self&&self.Object===Object&&self,m=v||y||Function("return this")(),b=Object.prototype,w=b.toString,S=Math.max,k=Math.min,O=function e(){return m.Date.now()};t.exports=n});var m="format,webp/",w={PRE:"act-webstatic-pre",PROD:"act-webstatic"};function S(){return window.location.hostname.includes("-pre")}function k(){var e=document.createElement("canvas");return e.getContext&&e.getContext("2d")?e.toDataURL("image/webp").indexOf("data:image/webp")==0:false}function O(e,t){var n=e;return t.forEach(function(e){var t=e||{},o=t.pattern,r=t.condition,i=t.replacement;!r&&typeof i=="string"&&(n=n.replace(o,i))}),n}function _(e){var t=[{pattern:m,condition:k(),replacement:""},{pattern:w.PRE,condition:S(),replacement:w.PROD}];return O(e,t)}function E(e,t){var n=e.indexOf("?");return n!==-1?t+e.slice(n):t}function R(e){var t=new RegExp("url\\(['\"]?(.*?)['\"]?\\)"),n=e.match(t);return n?n[1]:null}var P="snap-style",j=["width","height","left","right","top","bottom","fontSize"],x=["background","backgroundImage","background-image"];function C(e){return Object.keys(e).filter(function(t){return e[t]!==void 0}).map(function(t){var n=e[t],o=t.replace(/([A-Z])/g,"-$1").toLowerCase();return x.includes(t)&&typeof n=="string"&&(n=_(n)),j.includes(t)&&typeof n=="number"?"".concat(o,": ").concat(n,"px"):"".concat(o,": ").concat(n)}).join("; ")}function T(e,t){var n=C(t);return n?"".concat(e," { ").concat(n," }"):""}var H=(typeof CSSStyleSheet==="undefined"?"undefined":g(CSSStyleSheet))<"u"&&"replaceSync"in CSSStyleSheet.prototype&&"adoptedStyleSheets"in document;function N(e,t){var n=Object.keys(e).map(function(t){return T(t,e[t])}).filter(function(e){return e!==""}),o=(t?[t].concat(b(n)):n).join("\n");if(!o)return null;if(H){var r=new CSSStyleSheet;return r.replaceSync(o),document.adoptedStyleSheets=b(document.adoptedStyleSheets).concat([r]),r}var i=document.createElement("style");return i.textContent=o,i.setAttribute(P,"true"),document.head.appendChild(i),i}function A(){var e=document.querySelector("style[".concat(P,"]"));e&&e.parentNode&&e.parentNode.removeChild(e)}function L(e,t){if(!t)return;var n=C(t);if(n){var o=e.style.cssText;e.style.cssText=o?"".concat(o,"; ").concat(n):n}}var M="snap-script",U=function(){var e=document.querySelector("script[".concat(M,"]"));e&&e.parentNode&&e.parentNode.removeChild(e)},D=function(){var e=document.currentScript;e&&e.setAttribute(M,"true")};function I(e,t){if(window["__fabPvImgUpload__".concat(t)])return;var n=new Image;n.fetchPriority="high",n.src="https://act.".concat(window.location.host.includes("hoyoverse")?"hoyoverse":"mihoyo",".com/puzzle/b.png?k=").concat(t,"&p=").concat(e,"&t=").concat(+new Date,"&").concat((location.search.match(/([?&])utm_(source|medium|campaign|id)=[^&]+/g)||[""]).map(function(e){return e.slice(1)}).join("&")),window["__fabPvImgUpload__".concat(t)]=true}function W(e,t,n){e.onload=function(){I(n,t)}}var z=function(e,t){var n=Element.prototype.appendChild;Element.prototype.appendChild=function o(o){var r=n.call(this,o);return s(this,Element)&&s(o,Element)&&e(this,o)&&t(),r}},q=function(e,t){setTimeout(function(){e()},t*100)},V=function(e,t){var n=function t(){var t=document.querySelector("#snap-layout");s(t,HTMLElement)&&e(t)};t?q(function(){n()},t):n()};var F=h(y());var B=/*#__PURE__*/function(){function e(){r(this,e);this.hooks=[],this.elementCreatedHooks=[]}a(e,[{key:"start",value:function e(){return this.hooks=this.constructor.globalHooks.slice(),this.hooks.push(this.renderHook),this.runHooks(),this}},{key:"addElementCreatedHook",value:function e(e){typeof e=="function"&&this.elementCreatedHooks.push(e)}},{key:"runElementCreatedHooks",value:function e(e,t){this.elementCreatedHooks.forEach(function(n){try{n(e,t)}catch(e){console.error("Element created hook execution error:",e)}})}},{key:"runHooks",value:function e(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;if(e>=this.hooks.length)return;var t=this.hooks[e],n=this,o=function t(t){t!==false&&n.runHooks(e+1)};try{var r=t.call(this,o);if(typeof r=="boolean"){if(r===!1)return;this.runHooks(e+1)}}catch(e){console.error("Hook execution error:",e)}}}],[{key:"addGlobalHook",value:function e(e){typeof e=="function"&&this.globalHooks.push(e)}}]);return e}();B.globalHooks=[];var K=/*#__PURE__*/function(e){l(t,e);function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};r(this,t);var n;n=o(this,t);n.hasSetupLayout=false;n.resetLayout=(0,F.default)(function(){var e=document.documentElement.clientWidth,t=document.documentElement.clientHeight;n.setupLayout(e,t),n.attachStyles()},100);n.vnode={},n.options=e,n.container=e.container,n.platform=e.platform,z(n.autoRemoveCondition,n.remove),n.waitForStableViewport(function(e,t){n.hasSetupLayout||(n.setupLayout(e,t),n.hasSetupLayout=true)});return n}a(t,[{key:"normalizeRenderTreeByRuntime",value:function e(e){return e}},{key:"renderHook",value:function e(){this.init()}},{key:"remove",value:function e(){if(window.location.href.includes("snapKeepRender")){console.warn("[SnapRender]: 当前模式为snapKeepRender，页面将一直保持预渲染状态！");return}window._SNAP_REMOVE_STATUS=true,V(function(e){q(function(){e.style.cssText=e.style.cssText?"".concat(e.style.cssText,"; opacity: 0; visibility: hidden"):"opacity: 0; visibility: hidden"},.5),V(function(e){e.parentNode&&e.parentNode.removeChild(e),U(),A()},2.5)})}},{key:"init",value:function e(){var e=this;if(D(),this.hasSetupLayout){this.render();return}else this.waitForStableViewport(function(t,n){e.setupLayout(t,n),e.hasSetupLayout=true,e.render()})}},{key:"render",value:function e(){var e=this;var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:false;this.options.tree&&(this.fragment=this.createSnapFragment(this.options.tree),requestAnimationFrame(function(){e.attachStyles(),e.attachContent(),window._SNAP_MOUNT_STATUS=true,requestAnimationFrame(function(){t||(window._SNAP_REMOVE_STATUS&&e.remove(),e.addDelayRemove()),e.enableTransition()})}))}},{key:"addDelayRemove",value:function e(){var e=this;setTimeout(function(){window._SNAP_REMOVE_STATUS||e.remove()},1e4)}},{key:"calcRem",value:function e(e){return 100*(e/this.options.designWidth)}},{key:"attachStyles",value:function e(){var e=this;var t={},n="";Object.keys(this.vnode).forEach(function(o){var r=e.vnode[o];o==="_css"&&typeof r=="string"?n=r:(typeof r==="undefined"?"undefined":g(r))=="object"&&r!==null&&(t[o]=r)}),N(t,n)}},{key:"attachContent",value:function e(){if(this.fragment){if(this.container&&this.container.parentNode&&this.container.nextSibling){this.container.parentNode.insertBefore(this.fragment,this.container.nextSibling);return}document.body.appendChild(this.fragment)}}},{key:"createSnapFragment",value:function e(e){var t=this;var n=document.createDocumentFragment();function o(e,t){e&&Object.keys(e).forEach(function(n){var o=e[n];o!==void 0&&t(n,o)})}var r=function(e){var n=e.tagName.toLowerCase()==="img",i=n?new Image:document.createElement(e.tagName);return t.runElementCreatedHooks(i,e),e.id&&(i.id=e.id),n&&e.exposure&&W(i,e.exposure,t.platform),L(i,e.style),o(e.attributes,function(o,r){n&&o==="src"&&(r=_(r)),o==="src"&&!r&&(i.ignore=true),t.setElementAttribute(i,o,r,n,!!e.exposure)}),e.textContent&&(i.innerHTML=e.textContent),e.children&&e.children.forEach(function(e){var t=r(e);t.ignore||i.appendChild(t)}),i},i=r(this.normalizeRenderTreeByRuntime?this.normalizeRenderTreeByRuntime(e):e);return n.appendChild(i),n}},{key:"waitForStableViewport",value:function e(e){var t=0,n=0,o=0,r=function(){var i=document.documentElement.clientWidth,a=document.documentElement.clientHeight;if(window._SNAP_M18N_URL||i===t&&a===n&&o>0){e(i,a);return}if(o>=10){e(i,a);return}t=i,n=a,o++,setTimeout(r,16)};r()}},{key:"setElementAttribute",value:function e(e,t,n,o,r){if(o&&t==="src"){var i=e;i.src=n,r&&i.complete&&i.naturalWidth>0&&typeof i.onload=="function"&&i.onload()}else e.setAttribute(t,n)}},{key:"enableTransition",value:function e(){var e=document.querySelector("#snap-layout");if(e){var t=e,n=t.style.cssText;t.style.cssText="".concat(n,"; transition: opacity 0.2s ease-out, visibility 0.2s ease-out; will-change: opacity, visibility")}}}]);return t}(B);function G(e){var t,n,o;var r=(t=e.children)===null||t===void 0?void 0:t.find(function(e){return e.id==="snap-frame"}),i=(r===null||r===void 0?void 0:(n=r.children)===null||n===void 0?void 0:n.filter(function(e){var t;return!!((t=e.style)===null||t===void 0?void 0:t.bottom)}))||[];return r&&e.children&&i.length>0&&(r.children=((o=r.children)===null||o===void 0?void 0:o.filter(function(e){var t;return!((t=e.style)===null||t===void 0?void 0:t.bottom)}))||[],e.children=e.children.concat(i)),e}var $=/*#__PURE__*/function(e){l(t,e);function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};r(this,t);return o(this,t,[e])}a(t,[{key:"normalizeRenderTreeByRuntime",value:function e(e){var t=this.env,n=t.layoutRatio,o=this.options,r=o.designWidth,i=o.designHeight,a=o.pcCover,u=a===void 0?false:a,c=o.fullScreen;return c==="rawClip"&&u&&r&&i&&n>r/i?G(e):e}},{key:"autoRemoveCondition",value:function e(e,t){return e.id==="flexible-fullscreen-body"&&t.className.indexOf("pz-home")!=-1}},{key:"setupLayout",value:function e(e,t){var n=this.options,o=n.fullScreen;if(this.env={layoutWidth:e,layoutHeight:t,layoutRatio:e/t},o==="rawClip"){this.setupRawClipLayout();return}this.setupColClipLayout()}},{key:"setupColClipLayout",value:function e(){var e=this.env,t=e.layoutWidth,n=e.layoutHeight,o=e.layoutRatio,r=this.options,i=r.designWidth,a=r.designHeight,u=r.maxRatio,c=r.clipType,l=c===void 0?"center":c,s=i/a,f=u!==false&&u!==void 0&&o>u,d=t,p=d/s;f&&(d=n*u,p=d/s);var h=Math.min(t,d),v=Math.min(n,p),y=-(d-h)/2,m=0;l==="center"?m=-(p-v)/2:l==="bottom"?m=0:l==="top"&&(m=v-p),this.setVnode(d,p,h,v,y,m,(t-h)/2,(n-v)/2)}},{key:"setupRawClipLayout",value:function e(){var e=this.env,t=e.layoutWidth,n=e.layoutHeight,o=e.layoutRatio,r=this.options,i=r.designWidth,a=r.designHeight,u=r.minRatio,c=r.pcCover,l=c===void 0?false:c,s=i/a,f=u!==false&&u!==void 0&&o<u,d=n,p=d*s;if(!l)f&&(d=t/u,p=d*s);else{var h=s;o>h&&(p=t,d=p/h),f&&(d=n,p=d*s)}var v=Math.min(t,p),y=Math.min(n,d),m=-(p-v)/2,b=-(d-y)/2;if(l&&f){m=-(p-d*u)/2,this.setVnode(p,d,d*u,y,m,b,0,0);return}l&&o>s&&(b=-(d-y)/2),this.setVnode(p,d,v,y,m,b,(t-v)/2,(n-y)/2)}},{key:"setVnode",value:function e(e,t,n,o,r,i,a,u){var c=this.env,l=c.layoutWidth,s=c.layoutHeight;document.documentElement.style.fontSize="".concat(this.calcRem(e),"px"),this.vnode={_css:"body,html {-webkit-overflow-scrolling: touch; touch-action: none;}",html:{height:"100%",overflow:"hidden"},body:{margin:"0px",padding:"0px",height:"100%",position:"fixed",transform:"rotate(0)",overflow:"hidden",width:l},"#snap-layout":{position:"fixed",width:n,height:o,left:a,top:u,overflow:"hidden","z-index":9999,opacity:1,visibility:"visible",transform:"translate3d(0, 0, 0)"},"#snap-frame":{position:"absolute",width:e,height:t,left:r,top:i}}}}]);return t}(K);var Z={DONE:4},J={OK:200};function X(e){e=e.replace("<br>","\n");var t=document.createElement("div");return t.innerHTML=e,t.textContent}function Y(e){return function(t){var n=this;document.documentElement.setAttribute("mi18n-lang",e.lang),n.addElementCreatedHook(function(e,t){var o=t.m18nKey,r=t.tagName,i=t.attributes,a=i===void 0?{}:i;if(!o)return;var u=n.m18n[o];if(u)if(r==="img"&&a.src)t.attributes.src=E(a.src,u);else if(r==="div"&&t.style&&(t.style.background||t.style["background-image"])){var c=R(t.style.background||t.style["background-image"]);c&&(t.style["background-image"]="url('".concat(E(c,u),"') !important"))}else e.textContent=X(u)});var o=new XMLHttpRequest;o.timeout=5e3,o.onreadystatechange=function(){if(o.readyState===Z.DONE)if(o.status===J.OK)try{n.m18n=JSON.parse(o.responseText),t&&t(!0)}catch(e){console.error("[m18nHook]: JSON parse error:",e)}else console.error("[m18nHook]: Request failed:",o.status,o.statusText)},o.onerror=function(){console.error("[m18nHook]: Request error")},o.open("GET",e.url),o.send()}}function Q(e){var t=[],n=e||{},o=n.m18nKey,r=n.tagName,i=n.attributes,a=n.style,u=n.children;if(!o&&(r==="img"&&i&&i.src&&t.push(_(i.src)),r==="div"&&a&&(a.background||a["background-image"]))){var c=R(a.background||a["background-image"]);c&&t.push(_(c))}return u&&u.length>0&&u.forEach(function(e){var n;(n=t).push.apply(n,b(Q(e)))}),t}function ee(){return function(){var e;if(!((e=this.options)===null||e===void 0?void 0:e.tree))return console.warn("[SnapRender PreloadHook]: 未找到options.tree，跳过图片预加载"),true;var t=Q(this.options.tree);return t.length===0?(console.log("[SnapRender PreloadHook]: 未找到需要预加载的图片"),true):(t.forEach(function(e){if(!e)return;var t=new Image;"fetchPriority"in t&&(t.fetchPriority="high"),t.onerror=function(){console.warn("[SnapRender PreloadHook]: 图片预加载失败 - ".concat(e))},t.src=e}),console.log("[SnapRender PreloadHook]: 开始预加载 ".concat(t.length," 张图片")),true)}}var et=function(e){if(e.length===0)return{};for(var t={},n=0;n<e.length;++n){var o=e[n].split("=",2);o.length==1?t[o[0]]="":t[o[0]]=decodeURIComponent(o[1].split("+").join(" "))}return t}(window.location.search.substr(1).split("&"));function en(e){var t="; ".concat(document.cookie).split("; ".concat(e,"="));if(t.length===2){var n=t.pop();return n&&n.split(";").shift()}}function eo(){if(window.PUZZLE_LANG)return window.PUZZLE_LANG;if(et.lang)return et.lang;var e=en("mi18nLang");return e||"en-us"}function er(){var e;var t=navigator.userAgent.indexOf("playstation")>-1,n=((e=et.plat_type)!==null&&e!==void 0?e:"").toLowerCase()==="cx";return t||n}function ei(){return er()||et.renderOff}var ea=function(e,t){if(window._SNAP_M18N_URL){var n=eo();e.addGlobalHook(ee()),e.addGlobalHook(Y({url:window._SNAP_M18N_URL+n+".json",lang:n}))}return new e(t).start()};(function(){try{if(ei()){console.warn("[SnapRender]: 当前为PS或Xbox平台，已跳过渲染。");return}var e=(/(iphone|iwatch|ipod|ipad|android|blackberry|bb10|(windows.*phone)|(windows.*touch)|meego|samsungbrowser|mobile|iemobile|mqqbrowser|juc|fennec|wosbrowser|browserng|webos|symbian|huaweibrowser)/i.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!/[?&](plat_type=(mac|pc|ps)|pz_plat=pc)/i.test(location.href)?"h5":"pc",t=e==="h5"?window._SNAP_TREE_H5:window._SNAP_TREE_PC,n=window._SNAP_LAYOUT_HANDLER(e),o=v(p({},n),{tree:t,platform:e,container:document.getElementById("app")}),r;r=ea($,o),window._SNAP_={platform:e,tree:t,layout:n,renderer:r,remove:r.remove},et.snapKeepRender&&(window.onresize=function(){r.resetLayout()})}catch(e){console.warn("[SnapRender ERROR]:",e)}})()})();//# sourceMappingURL=puzzle.fullscreen.iife.js.map</script><script src="https://webstatic.mihoyo.com/dora/biz/render-template/3.22.1/polyfill.js"></script><script src="https://webstatic.mihoyo.com/dora/biz/mihoyo-browser-tips/v1/main.js"></script><script>window.miHoYoBrowserTips && window.miHoYoBrowserTips.init({isSea:false})</script><script src="https://webstatic.mihoyo.com/dora/biz/mihoyo-analysis/v2/main.js"></script><script src="https://webstatic.mihoyo.com/dora/biz/mihoyo-event-login/v2/main.js"></script><script src="https://webstatic.mihoyo.com/dora/biz/mihoyo-account-sdk/main.js"></script><script src="https://webstatic.mihoyo.com/dora/lib/vue/2.7.14/vue.runtime.min.js"></script><script defer="defer" src="https://webstatic.mihoyo.com/dora/biz/render-template/3.22.1/app.js"></script></body></html>